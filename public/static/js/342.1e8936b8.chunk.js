"use strict";(self.webpackChunkgocredix=self.webpackChunkgocredix||[]).push([[342],{4781:function(e,r,t){t.r(r),t.d(r,{default:function(){return k}});var n=t(2791),a=t(1450),o=t(9434),s=t(6385),i=t(9436),u=t(1701),c=[{field:"fullName",headerName:"Nombre",width:160,valueGetter:function(e){return"".concat(e.row.cliente||"")}},{field:"fecha_prestamo",headerName:"Fecha Prestamo",width:120,editable:!1,valueFormatter:function(e){return e.value.split("T")[0]}},{field:"valor_prestamo",headerName:"Valor Prestamo",width:150,editable:!1,valueFormatter:function(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e.value)}},{field:"tasa_interes",headerName:"Tasa",width:80,editable:!1,valueFormatter:function(e){return e.value+"%"}},{field:"capital_actual",headerName:"Capital",width:150,editable:!1,valueFormatter:function(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e.value)}},{field:"valor_interes",headerName:"Interes",width:150,editable:!1,valueFormatter:function(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e.value)}},{field:"ultimo_pago",headerName:"Fecha_corte",width:120,editable:!1,valueGetter:function(e){var r;if((null===e||void 0===e||null===(r=e.row.pagos)||void 0===r?void 0:r.length)>0){var t=e.row.pagos.reduce((function(e,r){return new Date(e.date)>new Date(r.date)?e:r}));return(null===t||void 0===t?void 0:t.fecha_pago).split("T")[0]}return null===e||void 0===e?void 0:e.row.fecha_prestamo.split("T")[0]}}],p=t(890),l=t(4721),d=t(8946),f=t(4265),y=t(2501),h=t(9e3),g=t(3395),v=t(1330),m=t(3788),x=t(184),w=function(e){e.onClick;return(0,x.jsxs)(f.D,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"center",alignItems:"center",gap:2},children:[(0,x.jsx)(y.S,{}),(0,x.jsx)(h.M,{}),(0,x.jsx)(g.L,{}),(0,x.jsx)(v.Zh,{}),(0,x.jsx)(m.T,{})]})},M=t(9961),j=t(4277),_=t(169),C=t(6088),E=function(){var e=(0,M.l)(),r=(0,j.P)(e,_.bu),t=(0,j.P)(e,_.UB);return(0,x.jsx)(C.Z,{color:"primary",count:t,page:r+1,onChange:function(r,t){return e.current.setPage(t-1)}})},k=function(){var e=(0,o.I0)(),r=(0,o.v9)((function(e){return e.prestamo})).prestamos;(0,n.useEffect)((function(){e((0,s.Jd)()),e((0,s.aM)())}),[]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,x.jsx)(p.Z,{variant:"h6",gutterBottom:!0,children:"Saldos"}),(0,x.jsx)(d.Z,{})]}),(0,x.jsx)(l.Z,{}),r&&(null===r||void 0===r?void 0:r.length)>0&&(0,x.jsxs)("div",{style:{marginTop:20,height:"30rem",width:"auto",overflow:"auto",cursor:"pointer"},children:[(0,x.jsx)(a._,{initialState:{sorting:{sortModel:[{field:"fullName",sort:"asc"}]}},getRowId:function(e){return e._id},density:"compact",rows:r,columns:c,pageSize:10,rowsPerPageOptions:[10],loading:!1,onRowClick:function(){},editMode:"row",components:{Toolbar:w,Pagination:E},experimentalFeatures:{newEditingApi:!0}}),(0,x.jsx)(i.g,{}),(0,x.jsx)(u.Z,{})]})]})}},1701:function(e,r,t){t.d(r,{Z:function(){return c}});t(2791);var n=t(4070),a=t(7317),o=t(9818),s=t(9434),i=t(4310),u=t(184);function c(){var e=(0,s.v9)((function(e){return e.ui})).error,r=(0,s.I0)(),t=function(){r((0,i.NV)(null))};return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(o.Z,{open:null!==e,onClose:t,children:(0,u.jsxs)(n.Z,{severity:"error",onClose:t,children:[(0,u.jsx)(a.Z,{children:"Error"}),e]})})})}},9436:function(e,r,t){t.d(r,{g:function(){return o}});t(2791);var n=t(9434),a=t(184),o=function(){var e=(0,n.v9)((function(e){return e.ui})).loading;return(0,a.jsx)(a.Fragment,{children:e&&(0,a.jsx)("div",{className:"loader text-center",children:(0,a.jsxs)("div",{className:"loader-inner",children:[(0,a.jsxs)("div",{className:"lds-roller mb-3",children:[(0,a.jsx)("div",{}),(0,a.jsx)("div",{}),(0,a.jsx)("div",{}),(0,a.jsx)("div",{}),(0,a.jsx)("div",{}),(0,a.jsx)("div",{}),(0,a.jsx)("div",{}),(0,a.jsx)("div",{})]}),(0,a.jsx)("h4",{className:"text-uppercase font-weight-bold",children:"Loading"})]})})})}},6385:function(e,r,t){t.d(r,{C5:function(){return d},v3:function(){return f},CA:function(){return y},gu:function(){return h},Jd:function(){return g},Mu:function(){return v},UH:function(){return m},tN:function(){return x},My:function(){return w},aM:function(){return M},iJ:function(){return j}});var n=t(5861),a=t(4687),o=t.n(a),s=t(362),i=t(7444),u=t(9095),c=t(3703),p=t(2426),l=t.n(p),d=function(e){var r=e.id_cliente,t=e.cliente,a=e.fecha_prestamo,p=e.valor_prestamo,d=e.tasa_interes,f=e.periodo_pago,y=e.observacion;return function(){var e=(0,n.Z)(o().mark((function e(n){var h,g;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n({type:i.h.uiOpenLoading}),a=l()(a).format(),e.next=5,(0,s.E)("prestamos/CreatePrestamo",{id_cliente:r,cliente:t,fecha_prestamo:a,valor_prestamo:p,tasa_interes:d,periodo_pago:f,observacion:y},"POST");case 5:return h=e.sent,e.next=8,h.json();case 8:(g=e.sent).ok?(n({type:u.a.formSave}),n({type:c.M.Create,payload:g.response}),n({type:i.h.uiErrorMessage,payload:null})):n({type:i.h.uiErrorMessage,payload:g.msg}),n({type:i.h.uiCloseLoading}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),n({type:i.h.uiCloseLoading}),n({type:i.h.uiErrorMessage,payload:JSON.stringify(e.t0)});case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(r){return e.apply(this,arguments)}}()},f=function(e){var r=e._id,t=e.id_cliente,a=e.cliente,p=e.fecha_prestamo,d=e.valor_prestamo,f=e.tasa_interes,y=e.periodo_pago,h=e.observacion;return function(){var e=(0,n.Z)(o().mark((function e(n){var g,v;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n({type:i.h.uiOpenLoading}),p=l()(p).format(),e.next=5,(0,s.E)("prestamos/UpdatePrestamo/"+r,{id_cliente:t,cliente:a,fecha_prestamo:p,valor_prestamo:d,tasa_interes:f,periodo_pago:y,observacion:h},"PUT");case 5:return g=e.sent,e.next=8,g.json();case 8:(v=e.sent).ok?(n({type:u.a.formSave}),n({type:c.M.Create,payload:v.response}),n({type:i.h.uiErrorMessage,payload:null})):n({type:i.h.uiErrorMessage,payload:v.msg}),n({type:i.h.uiCloseLoading}),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0),n({type:i.h.uiCloseLoading}),n({type:i.h.uiErrorMessage,payload:JSON.stringify(e.t0)});case 18:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(r){return e.apply(this,arguments)}}()},y=function(e){return function(){var r=(0,n.Z)(o().mark((function r(t){var n,a;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t({type:i.h.uiOpenLoading}),r.next=4,(0,s.E)("prestamos/DeletePrestamo/"+e,{},"delete");case 4:return n=r.sent,r.next=7,n.json();case 7:(a=r.sent).ok?(t({type:u.a.formDelete}),t({type:c.M.Delete,payload:a.response}),t({type:i.h.uiErrorMessage,payload:null})):t({type:i.h.uiErrorMessage,payload:a.msg}),t({type:i.h.uiCloseLoading}),r.next=17;break;case 12:r.prev=12,r.t0=r.catch(0),console.error(r.t0),t({type:i.h.uiCloseLoading}),t({type:i.h.uiErrorMessage,payload:JSON.stringify(r.t0)});case 17:case"end":return r.stop()}}),r,null,[[0,12]])})));return function(e){return r.apply(this,arguments)}}()},h=function(e){return function(){var r=(0,n.Z)(o().mark((function r(t){var n,a;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t({type:i.h.uiOpenLoading}),r.next=4,(0,s.E)("prestamos/getPrestamoByCliente/"+e,{});case 4:return n=r.sent,r.next=7,n.json();case 7:(a=r.sent).ok?(t({type:c.M.searchByClientId,payload:a.response}),t({type:i.h.uiErrorMessage,payload:null})):t({type:i.h.uiErrorMessage,payload:a.msg}),t({type:i.h.uiCloseLoading}),r.next=17;break;case 12:r.prev=12,r.t0=r.catch(0),console.error(r.t0),t({type:i.h.uiCloseLoading}),t({type:i.h.uiErrorMessage,payload:JSON.stringify(r.t0)});case 17:case"end":return r.stop()}}),r,null,[[0,12]])})));return function(e){return r.apply(this,arguments)}}()},g=function(){return function(e){e({type:c.M.Initial})}},v=function(e){return function(r){r({type:c.M.Read,payload:e})}},m=function(e,r,t,a,u){return function(){var p=(0,n.Z)(o().mark((function n(p){var l,d;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,p({type:i.h.uiOpenLoading}),n.next=4,(0,s.E)("prestamos/generatePago",{prestamo_id:e,valor_pagar:r,fecha_pago:t,valor_interes:a,checkFin:u},"POST");case 4:return l=n.sent,n.next=7,l.json();case 7:(d=n.sent).ok?(p({type:c.M.GeneratePago,payload:d.response}),p({type:i.h.uiErrorMessage,payload:null})):p({type:i.h.uiErrorMessage,payload:d.msg}),p({type:i.h.uiCloseLoading}),n.next=17;break;case 12:n.prev=12,n.t0=n.catch(0),console.error(n.t0),p({type:i.h.uiCloseLoading}),p({type:i.h.uiErrorMessage,payload:JSON.stringify(n.t0)});case 17:case"end":return n.stop()}}),n,null,[[0,12]])})));return function(e){return p.apply(this,arguments)}}()},x=function(e,r){return function(){var t=(0,n.Z)(o().mark((function t(n){var a,u;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:i.h.uiOpenLoading}),t.next=4,(0,s.E)("prestamos/reCalcularInteres",{prestamo_id:e,fecha_corte:r},"post");case 4:return a=t.sent,t.next=7,a.json();case 7:(u=t.sent).ok?(console.log(u.response),n({type:c.M.reCalculateInteres,payload:u.response}),n({type:i.h.uiErrorMessage,payload:null})):n({type:i.h.uiErrorMessage,payload:u.msg}),n({type:i.h.uiCloseLoading}),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(0),console.error(t.t0),n({type:i.h.uiCloseLoading}),n({type:i.h.uiErrorMessage,payload:JSON.stringify(t.t0)});case 17:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()},w=function(e,r){return function(){var t=(0,n.Z)(o().mark((function t(n){var a,u;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:i.h.uiOpenLoading}),t.next=4,(0,s.E)("prestamos/deletePago",{pago_id:e,prestamo_id:r},"POST");case 4:return a=t.sent,t.next=7,a.json();case 7:(u=t.sent).ok?(n({type:c.M.deletePago,payload:u.response}),n({type:i.h.uiErrorMessage,payload:null})):n({type:i.h.uiErrorMessage,payload:u.msg}),n({type:i.h.uiCloseLoading}),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(0),console.error(t.t0),n({type:i.h.uiCloseLoading}),n({type:i.h.uiErrorMessage,payload:JSON.stringify(t.t0)});case 17:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()},M=function(){return function(){var e=(0,n.Z)(o().mark((function e(r){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r({type:i.h.uiOpenLoading}),e.next=4,(0,s.E)("prestamos/getPrestamoActivo",{});case 4:return t=e.sent,e.next=7,t.json();case 7:(n=e.sent).ok?(r({type:c.M.getPrestamosActivos,payload:n.response}),r({type:i.h.uiErrorMessage,payload:null})):r({type:i.h.uiErrorMessage,payload:n.msg}),r({type:i.h.uiCloseLoading}),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0),r({type:i.h.uiCloseLoading}),r({type:i.h.uiErrorMessage,payload:JSON.stringify(e.t0)});case 17:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(r){return e.apply(this,arguments)}}()},j=function(e,r){return function(){var t=(0,n.Z)(o().mark((function t(n){var a,u;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:i.h.uiOpenLoading}),t.next=4,(0,s.E)("prestamos/getProximosCobrar",{fecha_ini:e,fecha_fin:r},"POST");case 4:return a=t.sent,t.next=7,a.json();case 7:(u=t.sent).ok?(n({type:c.M.searchByClientId,payload:u.response}),n({type:i.h.uiErrorMessage,payload:null})):n({type:i.h.uiErrorMessage,payload:u.msg}),n({type:i.h.uiCloseLoading}),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(0),console.error(t.t0),n({type:i.h.uiCloseLoading}),n({type:i.h.uiErrorMessage,payload:JSON.stringify(t.t0)});case 17:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()}}}]);
//# sourceMappingURL=342.1e8936b8.chunk.js.map