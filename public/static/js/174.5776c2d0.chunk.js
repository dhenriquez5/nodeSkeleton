"use strict";(self.webpackChunkgocredix=self.webpackChunkgocredix||[]).push([[174],{9174:function(e,n,t){t.d(n,{m:function(){return M}});var r=t(885),a=t(7621),i=t(9504),l=t(890),s=t(2791),o=t(9434),c=t(6385),u=t(4310),d=t(4215),x=t(7497),f=t(792),h=t(4721),p=t(9276),m=t(5359),j=t(9778),g=t(8447),Z=t(184),v=function(e){var n=e.open,t=e.handleClose,r=e.children,a=e.title,i=(0,j.Z)(),l={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"".concat(i?"90%":"70%"),bgcolor:"background.paper !important",border:"1px solid ".concat(m.r.palette.valen.tertiary),borderRadius:8,boxShadow:24,p:4,background:"white"};return(0,Z.jsx)(f.Z,{open:n,onClose:t,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,Z.jsxs)(p.Z,{sx:l,children:[(0,Z.jsx)(g.N,{title:a,handleClose:t}),(0,Z.jsx)(h.Z,{sx:{mt:2,mb:2}}),r]})})},b=(t(2377),t(5861)),y=t(4687),_=t.n(y),C=t(5855),P=t(3994),k=function(e){var n=e.value;return(0,Z.jsx)(Z.Fragment,{children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(n||0)})},S=function(e){var n=e.pago,t=e.deletePago;return(0,Z.jsxs)(C.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,Z.jsx)(P.Z,{component:"th",scope:"row",children:(0,Z.jsx)(k,{value:n.valor_pago})}),(0,Z.jsx)(P.Z,{children:n.fecha_pago.split("T")[0]}),(0,Z.jsx)(P.Z,{children:(0,Z.jsx)(k,{value:n.valor_capital})}),(0,Z.jsx)(P.Z,{children:(0,Z.jsx)(k,{value:n.valor_interes})}),(0,Z.jsx)(P.Z,{children:(0,Z.jsx)(d.U,{fullWidth:!1,text:"Eliminar",sx:{background:"red"},onClick:function(){return t(n._id)}})})]})},w=t(9585),I=t(9281),U=t(5527),F=t(9836),D=t(6890),N=t(3382),V=function(e){var n=e.fecha_ini,t=e.fecha_fin,r=(0,o.I0)(),u=(0,o.v9)((function(e){return e.prestamo})).prestamo,d=(0,o.v9)((function(e){return e.ui})),x=(d.modalOpen,d.optionSelected);(0,s.useEffect)((function(){console.log(u)}),[u]);var f=function(){var e=(0,b.Z)(_().mark((function e(a){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r((0,c.My)(a,u._id));case 2:if("Pagos"!==x){e.next=5;break}return e.next=5,r((0,c.gu)(u.id_cliente));case 5:if("Proximos a cobrar"!==x){e.next=8;break}return e.next=8,r((0,c.iJ)(n,t));case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsxs)(a.Z,{sx:{mt:2},elevation:3,children:[(0,Z.jsx)(w.Z,{children:" Info del prestamo"}),(0,Z.jsxs)(i.Z,{children:[(0,Z.jsxs)(l.Z,{children:["Cliente: ",u.cliente]}),(0,Z.jsxs)(l.Z,{children:["Fecha: ",u.fecha_prestamo.split("T")[0]]}),(0,Z.jsxs)(l.Z,{children:["Valor: ",new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(u.valor_prestamo)]}),(0,Z.jsxs)(l.Z,{children:["Saldo: ",(0,Z.jsx)(k,{value:u.capital_actual})," "]}),(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(I.Z,{component:U.Z,children:(0,Z.jsxs)(F.Z,{"aria-label":"simple table",children:[(0,Z.jsx)(D.Z,{children:(0,Z.jsxs)(C.Z,{children:[(0,Z.jsx)(P.Z,{children:"Pago"}),(0,Z.jsx)(P.Z,{children:"Fecha"}),(0,Z.jsx)(P.Z,{children:"Capital"}),(0,Z.jsx)(P.Z,{children:"Interes"}),(0,Z.jsx)(P.Z,{})]})}),(0,Z.jsx)(N.Z,{children:(null===u||void 0===u?void 0:u.pagos)&&(null===u||void 0===u?void 0:u.pagos.map((function(e,n){return(0,Z.jsx)(S,{pago:e,deletePago:f},n)})))})]})})})]})]})})},M=function(e){var n=e.fecha_ini,t=e.fecha_fin,f=(0,o.I0)(),h=(0,o.v9)((function(e){return e.prestamo})).lista_prestamos,p=(0,s.useState)(!1),m=(0,r.Z)(p,2),j=m[0],g=m[1];return(0,Z.jsxs)(Z.Fragment,{children:[h.length>0&&h.map((function(e){return(0,Z.jsx)(a.Z,{sx:{mt:2},elevation:3,children:(0,Z.jsxs)(i.Z,{children:[(0,Z.jsxs)(l.Z,{children:["Cliente: ",e.cliente]}),(0,Z.jsxs)(l.Z,{children:["Fecha Prestamo: ",e.fecha_prestamo.split("T")[0]]}),(0,Z.jsxs)(l.Z,{children:["Valor Prestamo: ",new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e.valor_prestamo)]}),(0,Z.jsxs)(l.Z,{children:["Capital Actual: ",new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e.capital_actual)]}),(0,Z.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:(0,Z.jsxs)(l.Z,{children:["Tasa Interes: ",e.tasa_interes,"%"]})}),(0,Z.jsxs)("div",{style:{display:"flex",justifyContent:"end",gap:4},children:[(0,Z.jsx)(d.U,{fullWidth:!1,text:"Pagar",onClick:function(){return n=e,f((0,c.Mu)(n)),void f((0,u.Dk)());var n}}),(0,Z.jsx)(d.U,{fullWidth:!1,text:"Ver pagos",onClick:function(){return n=e,f((0,c.Mu)(n)),void g(!0);var n}})]})]})},e._id)})),(0,Z.jsx)(x.o,{fecha_ini:n,fecha_fin:t,title:"Pagar Prestamo"}),(0,Z.jsx)(v,{open:j,handleClose:function(){g(!1)},title:"Pagos",children:(0,Z.jsx)(V,{fecha_ini:n,fecha_fin:t})})]})}},7497:function(e,n,t){t.d(n,{o:function(){return W}});var r,a=t(5861),i=t(885),l=t(4687),s=t.n(l),o=t(4721),c=t(1614),u=t(1889),d=t(890),x=t(7391),f=t(4454),h=t(792),p=t(9276),m=t(2426),j=t.n(m),g=t(2791),Z=t(9434),v=t(5359),b=t(9778),y=t(6385),_=t(4310),C=t(4215),P=t(1413),k=t(5987),S=t(168),w=t(6934),I=t(948),U=t(184),F=["onChange"],D=["label"],N=(0,w.ZP)(x.Z)(r||(r=(0,S.Z)(["\n    & label span{\n        color:red!important\n    }\n    & input:disabled{\n        color:red!important;\n        -webkit-text-fill-color: rgba(0, 0, 0, 1.0);\n    }\n"]))),V=g.forwardRef((function(e,n){var t=e.onChange,r=(0,k.Z)(e,F);return(0,U.jsx)(I.h3,(0,P.Z)((0,P.Z)({},r),{},{getInputRef:n,onValueChange:function(n){t({target:{name:e.name,value:n.value}})},thousandSeparator:!0,valueIsNumericString:!0}))})),M=function(e){var n=e.label,t=(0,k.Z)(e,D);return(0,U.jsxs)(U.Fragment,{children:["  ",(0,U.jsx)(N,(0,P.Z)((0,P.Z)({margin:"normal",fullWidth:!0,label:n},t),{},{InputProps:{inputComponent:V,inputProps:(0,P.Z)({},t)}}))]})},T=t(8447),W=function(e){var n=e.title,t=e.fecha_ini,r=e.fecha_fin,l=(0,b.Z)(),m={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"".concat(l?"80%":"60%"),bgcolor:"background.paper !important",border:"1px solid ".concat(v.r.palette.valen.tertiary),borderRadius:8,boxShadow:24,p:4,background:"white"},P=(0,g.useState)(""),k=(0,i.Z)(P,2),S=k[0],w=k[1],I=(0,g.useState)(""),F=(0,i.Z)(I,2),D=F[0],N=F[1],V=(0,g.useState)(""),W=(0,i.Z)(V,2),R=W[0],E=W[1],Y=(0,g.useState)(""),A=(0,i.Z)(Y,2),J=A[0],O=A[1],$=(0,g.useState)(!1),q=(0,i.Z)($,2),B=q[0],H=q[1],L=(0,g.useState)(!1),z=(0,i.Z)(L,2),G=z[0],K=z[1],Q=(0,Z.I0)(),X=(0,Z.v9)((function(e){return e.ui})),ee=X.modalOpen,ne=X.optionSelected,te=(0,Z.v9)((function(e){return e.prestamo})).prestamo;(0,g.useEffect)((function(){ae()}),[te]),(0,g.useEffect)((function(){ee||(E(j()().format("YYYY-MM-DD")),w(""),N(""),O(""),H(!1),K(!1))}),[ee]);var re,ae=function(){var e;if((null===te||void 0===te||null===(e=te.pagos)||void 0===e?void 0:e.length)>0){var n=te.pagos.reduce((function(e,n){return new Date(e.date)>new Date(n.date)?e:n}));O(null===n||void 0===n?void 0:n.fecha_pago)}},ie=function(){Q((0,_.MJ)())},le=function(){var e=(0,a.Z)(s().mark((function e(n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S){e.next=2;break}return e.abrupt("return",Q((0,_.NV)("Digite correctamente el valor a pagar")));case 2:if(R){e.next=4;break}return e.abrupt("return",Q((0,_.NV)("Digite correctamente la fecha de pago")));case 4:if(D){e.next=6;break}return e.abrupt("return",Q((0,_.NV)("Digite correctamente el valor del interes")));case 6:return console.log(S),console.log(R),console.log(D),e.next=11,Q((0,y.UH)(te._id,S,R,D,G));case 11:if("Pagos"!==ne){e.next=14;break}return e.next=14,Q((0,y.gu)(te.id_cliente));case 14:if("Proximos a cobrar"!==ne){e.next=17;break}return e.next=17,Q((0,y.iJ)(t,r));case 17:ie();case 18:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,U.jsx)("div",{children:(re=te,!(0===Object.keys(re).length)&&(0,U.jsx)(h.Z,{open:ee,onClose:ie,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,U.jsxs)(p.Z,{sx:m,children:[(0,U.jsx)(T.N,{title:n,handleClose:ie}),(0,U.jsx)(o.Z,{sx:{mt:2,mb:2}}),(0,U.jsx)(c.Z,{component:"main",maxWidth:"lg",style:{display:"flex",justifyContent:"center",alignItems:"center",alignContent:"center"},children:(0,U.jsxs)(u.ZP,{container:!0,spacing:2,style:{display:"flex",justifyContent:"center",alignItems:"center",alignContent:"center"},children:[(0,U.jsx)(u.ZP,{item:!0,xs:12,md:6,children:(0,U.jsxs)(d.Z,{children:["Cliente: ",B," ",te.cliente]})}),(0,U.jsx)(u.ZP,{item:!0,xs:12,md:6,children:(0,U.jsxs)(d.Z,{children:["Fecha prestamo: ",te.fecha_prestamo.split("T")[0]]})}),(0,U.jsx)(u.ZP,{item:!0,xs:12,md:6,children:(0,U.jsxs)(d.Z,{children:["Valor Prestamo: ",new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(te.valor_prestamo)]})}),(0,U.jsx)(u.ZP,{item:!0,xs:12,md:6,children:(0,U.jsxs)(d.Z,{children:["Capital Actual: ",new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(te.capital_actual)]})}),(0,U.jsx)(u.ZP,{item:!0,xs:12,md:6,children:(0,U.jsxs)(d.Z,{children:[" Interes Real : ",new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(te.valor_interes)]})}),(0,U.jsx)(u.ZP,{item:!0,xs:12,md:6,children:(0,U.jsxs)(d.Z,{children:[" ",(0,U.jsx)("b",{children:"Fecha Corte"}),": ",J.split("T")[0]]})}),(0,U.jsx)(u.ZP,{item:!0,xs:12,md:3,children:(0,U.jsx)(x.Z,{type:"date",margin:"dense",id:"fecha_pago",label:"Fecha pago",name:"fecha_pago",InputLabelProps:{shrink:!0},onChange:function(e){E(e.target.value)},onBlur:function(e){if(!R)return Q((0,_.NV)("Digite la fecha de pago correctamente"));Q((0,y.tN)(te._id,j()(R)))},value:R,prefix:"$"})}),(0,U.jsx)(u.ZP,{item:!0,xs:12,md:4,children:(0,U.jsx)(M,{margin:"dense",id:"valor_pagar",label:"Valor a Pagar",name:"valor_pagar",onChange:function(e){w(e.target.value)},value:S,prefix:"$"})}),(0,U.jsxs)(u.ZP,{item:!0,xs:12,md:4,style:{display:"flex",justifyContent:"center"},children:[(0,U.jsx)(M,{margin:"dense",id:"valor_interes",label:"Valor Interes",name:"valor_interes",onChange:function(e){return N(e.target.value)},value:D,prefix:"$"}),(0,U.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignContent:"center",alignItems:"center"},children:[(0,U.jsxs)("span",{children:[te.tasa_interes,"%"]}),(0,U.jsx)(f.Z,{onChange:function(){console.log(te),H((function(e){return!e}));var e=te.capital_actual*(te.tasa_interes/100);B?(w(""),N("")):(w(e),N(e))},value:B})]})]}),(0,U.jsx)(C.U,{text:"Pagar",onClick:le}),(0,U.jsx)(f.Z,{title:"Al seleccionar aqui se da el credito por pagado",onChange:function(){K((function(e){return!e}))},value:G}),"Finiquitar Prestamo"]})})]})}))})}},4215:function(e,n,t){t.d(n,{U:function(){return c}});var r=t(1413),a=t(5987),i=t(6151),l=(t(2791),t(5359)),s=t(184),o=["onClick","text","type","style"],c=function(e){var n=e.onClick,t=e.text,c=e.type,u=(e.style,(0,a.Z)(e,o));return(0,s.jsx)(i.Z,(0,r.Z)((0,r.Z)({onClick:n,className:"button",type:c,fullWidth:!0,variant:"contained",sx:{mt:3,mb:2,bgcolor:l.r.palette.valen.secondary}},u),{},{children:t}))}}}]);
//# sourceMappingURL=174.5776c2d0.chunk.js.map